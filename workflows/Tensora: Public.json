{"createdAt":"2025-08-03T14:17:28.635Z","updatedAt":"2025-08-06T03:23:54.000Z","id":"RMwAax9sNuChMDbk","name":"Tensora: Public","active":false,"isArchived":false,"nodes":[{"parameters":{"formTitle":"Embedding","formFields":{"values":[{"fieldLabel":"File","fieldType":"file","multipleFiles":false,"acceptFileTypes":".txt","requiredField":true}]},"options":{}},"type":"n8n-nodes-base.formTrigger","typeVersion":2.2,"position":[-16,-48],"id":"da57276e-5c88-458e-8073-e54cb3f118cb","name":"On form submission","webhookId":"cc3741f6-b0cb-4c1d-938c-070f8f22db73"},{"parameters":{"options":{"systemMessage":"You are a Prasad Sawant's Assistant. Answers the Question asked regarding prasad by user. Use connected database always to answer the question."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.1,"position":[-672,-32],"id":"c9b7e161-991b-4457-9140-0e6e3468a379","name":"AI Agent"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.embeddingsGoogleGemini","typeVersion":1,"position":[320,160],"id":"eb53bc92-da5c-4117-9495-78b3b71024bc","name":"Embeddings Google Gemini1","credentials":{"googlePalmApi":{"id":"A6pXfrHCKXrRlx2l","name":"Google Gemini(PaLM) Api account"}}},{"parameters":{"includeTime":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Include_Current_Time', ``, 'boolean') }}","options":{"timezone":"IST"}},"type":"n8n-nodes-base.dateTimeTool","typeVersion":2,"position":[-288,240],"id":"1c5efdae-9536-4a95-8702-e5752873aa26","name":"Date & Time"},{"parameters":{"textSplittingMode":"custom","options":{}},"type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","typeVersion":1.1,"position":[496,160],"id":"c0621665-8e1e-440a-924f-c8ae98bab914","name":"Default Data Loader"},{"parameters":{"operation":"text","binaryPropertyName":"File","options":{}},"type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[144,-48],"id":"b880783f-67fc-47d2-a4c4-876bdd21d1c0","name":"Extract from File"},{"parameters":{"mode":"runOnceForEachItem","language":"python","pythonCode":"corpus = _input.first()[\"json\"][\"data\"]\n\n# Clean the text\ncleaned_text = (\n    corpus.replace('\\r', '')\n          .replace('\\n\\n', '\\n')       # Collapse multiple newlines\n          .replace('\\n', ' ')          # Replace newlines with space\n          .replace('  ', ' ')          # Collapse multiple spaces\n          .strip()\n)\n\n# Split into chunks using '---' as delimiter\nchunks = cleaned_text.strip()\n\nreturn {\"chunk\": chunks}\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[288,-48],"id":"227aac5d-d26d-4197-a173-8e338939c30d","name":"Code"},{"parameters":{"separator":"---","chunkSize":50},"type":"@n8n/n8n-nodes-langchain.textSplitterCharacterTextSplitter","typeVersion":1,"position":[432,320],"id":"a3b4e1c4-8a4a-4f75-a484-9e96f8f0b14c","name":"Character Text Splitter"},{"parameters":{"options":{"maxOutputTokens":1000,"temperature":0.4,"safetySettings":{"values":[{"category":"HARM_CATEGORY_HARASSMENT","threshold":"BLOCK_LOW_AND_ABOVE"},{"category":"HARM_CATEGORY_HATE_SPEECH","threshold":"BLOCK_LOW_AND_ABOVE"},{"category":"HARM_CATEGORY_SEXUALLY_EXPLICIT","threshold":"BLOCK_LOW_AND_ABOVE"},{"category":"HARM_CATEGORY_DANGEROUS_CONTENT","threshold":"BLOCK_LOW_AND_ABOVE"}]}}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[-848,240],"id":"30df138e-4d48-44ea-8167-9deab8978d96","name":"LLM","credentials":{"googlePalmApi":{"id":"o40oJ0ZLn1vdpVvD","name":"Tensora 2"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.embeddingsGoogleGemini","typeVersion":1,"position":[-624,416],"id":"8d02b863-e53e-4bb0-840d-4135baaa7968","name":"Embeddings Google","credentials":{"googlePalmApi":{"id":"A6pXfrHCKXrRlx2l","name":"Google Gemini(PaLM) Api account"}}},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-64,352],"id":"6e8423f2-6045-446a-81d2-f6a203f26a69","name":"Delete Existing all data"},{"parameters":{"tableName":"portfolio_chat_history"},"type":"@n8n/n8n-nodes-langchain.memoryPostgresChat","typeVersion":1.3,"position":[-736,240],"id":"b140290b-575d-4bce-a5b4-d07abf47d3eb","name":"Postgres Chat Memory","credentials":{"postgres":{"id":"odt4ipqVoAUDhpSK","name":"Postgres account: hostinger"}}},{"parameters":{"mode":"insert","tableName":"portfolio_chat_faq_embeddings","options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStorePGVector","typeVersion":1.3,"position":[432,-48],"id":"af662415-eaae-41cf-bd2c-4c59cfaa2a5c","name":"Postgres PGVector Store","credentials":{"postgres":{"id":"odt4ipqVoAUDhpSK","name":"Postgres account: hostinger"}}},{"parameters":{"mode":"retrieve-as-tool","toolDescription":"Use this knowledge base to answer questions from the user","tableName":"portfolio_chat_faq_embeddings","options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStorePGVector","typeVersion":1.3,"position":[-592,240],"id":"79208fa0-5f07-4abb-81b4-83ade6e1d444","name":"Postgres PGVector Store1","credentials":{"postgres":{"id":"odt4ipqVoAUDhpSK","name":"Postgres account: hostinger"}}},{"parameters":{"workflowInputs":{"values":[{"name":"sessionId"},{"name":"chatInput"},{"name":"action"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-880,-32],"id":"62111e61-d631-4294-9c4c-e07b602bc823","name":"When Executed by Another Workflow"},{"parameters":{"operation":"deleteTable","schema":{"__rl":true,"value":"public","mode":"list","cachedResultName":"public"},"table":{"__rl":true,"value":"portfolio_chat_faq_embeddings","mode":"list","cachedResultName":"portfolio_chat_faq_embeddings"},"options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[144,352],"id":"0633ed0c-92e7-4a6a-93e5-4c94c1f7c09e","name":"Delete table or rows","credentials":{"postgres":{"id":"odt4ipqVoAUDhpSK","name":"Postgres account: hostinger"}}}],"connections":{"On form submission":{"main":[[{"node":"Extract from File","type":"main","index":0}]]},"Embeddings Google Gemini1":{"ai_embedding":[[{"node":"Postgres PGVector Store","type":"ai_embedding","index":0}]]},"Date & Time":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Default Data Loader":{"ai_document":[[{"node":"Postgres PGVector Store","type":"ai_document","index":0}]]},"Extract from File":{"main":[[{"node":"Code","type":"main","index":0}]]},"Code":{"main":[[{"node":"Postgres PGVector Store","type":"main","index":0}]]},"Character Text Splitter":{"ai_textSplitter":[[{"node":"Default Data Loader","type":"ai_textSplitter","index":0}]]},"Embeddings Google":{"ai_embedding":[[{"node":"Postgres PGVector Store1","type":"ai_embedding","index":0}]]},"Delete Existing all data":{"main":[[{"node":"Delete table or rows","type":"main","index":0}]]},"Postgres Chat Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"Postgres PGVector Store1":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"LLM":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Delete table or rows":{"main":[[]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"aa8dde45-9830-4171-b717-acca14358542","triggerCount":0,"tags":[{"createdAt":"2025-08-03T14:23:51.503Z","updatedAt":"2025-08-03T14:23:51.503Z","id":"HyvSuDLV7ktBrUwp","name":"core"}]}